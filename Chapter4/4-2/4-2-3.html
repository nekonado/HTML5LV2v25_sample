<!DOCTYPE html>
<html>
  <body>
    <video id="video" width="400" height="300" autoplay>
      <source src="sample.mp4" />
      <source src="sample.ogv" />
      <source src="sample.webm" />
    </video>
    <p id="state"></p>
    <button id="btn">動画再生</button>
  </body>
  <script>
    window.onload = function () {
      let video = document.getElementById("video");
      let state = document.getElementById("state");
      video.addEventListener("loadedmetadata", function () {
        // 要注意！理由は後述
        console.log("ロード開始しました");
        state.innerText = "ロード開始しました";
      });
      video.addEventListener("loadeddata", function () {
        console.log("読み込み完了しました");
        state.innerText = "読み込み完了しました";
      });
      video.addEventListener("canplay", function () {
        console.log("再生可能です");
        state.innerText = "再生可能です";
      });
      video.addEventListener("playing", function () {
        console.log("再生中です");
        state.innerText = "再生中です";
      });
    };

    // ボタンを押したら動画を再生
    let button = document.getElementById("btn");
    button.addEventListener("click", function () {
      video.play();
    });
  </script>
</html>
